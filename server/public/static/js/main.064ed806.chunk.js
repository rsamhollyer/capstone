(this["webpackJsonpweather-piece"]=this["webpackJsonpweather-piece"]||[]).push([[0],{193:function(e,t,a){},331:function(e,t,a){"use strict";a.r(t);var s=a(3),c=a(1),n=a.n(c),r=a(172),i=a.n(r),o=a(54),l=a(40),h=a.n(l),j=a(63),d=a(14),b=(a(193),a(64)),u=a.n(b);function m(e){var t=e.main;return Object(s.jsx)("div",{style:{fontSize:"3rem"},children:{Thunderstorm:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/thunderstorm.svg",alt:"Clouds"}),Drizzle:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/drizzle.svg",alt:"Clouds"}),Rain:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/rain.svg",alt:"Clouds"}),Snow:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/snow.svg",alt:"Clouds"}),Mist:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/mist.svg",alt:"Clouds"}),Smoke:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/smoke.svg",alt:"Clouds"}),Haze:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/mist.svg",alt:"Clouds"}),Dust:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/smoke.svg",alt:"Clouds"}),Fog:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/mist.svg",alt:"Clouds"}),Sand:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/smoke.svg",alt:"Clouds"}),Ash:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/smoke.svg",alt:"Clouds"}),Squall:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/squall.svg",alt:"Clouds"}),Tornado:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/tornado.svg",alt:"Clouds"}),Clear:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/clear.svg",alt:"Clouds"}),Clouds:Object(s.jsx)("img",{style:{width:"50px",height:"50px"},src:"../weathericons/clouds.svg",alt:"Clouds"})}[t]})}var x=function(e){var t,a,c=e.weather,n=null===(t=c.rain)||void 0===t?void 0:t["1h"],r=null===(a=c.snow)||void 0===a?void 0:a["1h"],i=n||r||0;return Object(s.jsxs)("h3",{children:[i," mm"]})},p=function(e){var t=e.weather;return Object(s.jsx)("div",{className:"weather-component",children:t&&Object(s.jsxs)("div",{className:"weather-body",children:[Object(s.jsx)("div",{className:"weather-name",children:Object(s.jsx)("h2",{className:"city-name",children:t.name})}),Object(s.jsxs)("div",{className:"weather-info",children:[Object(s.jsx)("div",{className:"weather-icon",children:Object(s.jsx)(m,{main:t.weather[0].main})}),Object(s.jsxs)("div",{className:"current-info",children:[Object(s.jsxs)("h4",{children:[t.weather[0].main," "]}),Object(s.jsxs)("h2",{children:[" ",Math.round(parseFloat(t.main.temp)).toLocaleString()," \xb0F"]}),Object(s.jsxs)("div",{className:"temp-extremes",children:[Object(s.jsxs)("h4",{children:["Low:"," ",Math.round(parseFloat(t.main.temp_min)).toLocaleString()]}),Object(s.jsxs)("h4",{children:["High:"," ",Math.round(parseFloat(t.main.temp_max)).toLocaleString()]})]})]})]}),Object(s.jsxs)("div",{className:"other-weather",children:[Object(s.jsxs)("div",{className:"small-weather-panel",children:[Object(s.jsx)("i",{className:"fas fa-wind"}),Object(s.jsxs)("h3",{children:[t.wind.speed," mph"]}),Object(s.jsxs)("h3",{children:["Direction: ",t.wind.deg,"\xb0"]}),t.wind.gust?Object(s.jsxs)("h4",{children:["Gusts:",t.wind.gust]}):Object(s.jsx)("h4",{children:"Gusts: No Data"}),Object(s.jsx)("h4",{children:"Wind"})]}),Object(s.jsxs)("div",{className:"small-weather-panel",children:[Object(s.jsx)("i",{className:"fas fa-eye"}),Object(s.jsxs)("h3",{children:[(parseFloat(t.visibility)/1e3).toLocaleString()," km"]}),Object(s.jsx)("h4",{children:"Visibility"})]}),Object(s.jsxs)("div",{className:"small-weather-panel",children:[Object(s.jsx)("i",{className:"fas fa-tint"}),Object(s.jsx)(x,{weather:t}),Object(s.jsx)("h4",{children:"Precipitation"})]})]})]})})},O=a(113),g=a.n(O),f=function(e){var t=e.getWeather,a=e.data;return Object(c.useEffect)((function(){a[0]&&t("imperial",a[0].lat,a[0].long)}),[a]),Object(s.jsxs)("div",{className:"header-component",children:[Object(s.jsx)("h1",{children:"Drone Dash"}),Object(s.jsxs)("div",{className:"date-time",children:[Object(s.jsx)(g.a,{className:"date",format:"DD/MM/YYYY"}),Object(s.jsx)(g.a,{className:"time",format:"HH:mm"})]})]})};function v(e){var t=e.getDrones,a=e.setSpeedChartData,c=e.setAltChartData,n=e.setMotorTempChartData,r=e.setIndex,i=e.droneName,o=e.activeDrone,l=e.setLastLoc;return Object(s.jsx)("button",{className:i===o?"flight-button flight-button-slide active":"flight-button flight-button-slide",onClick:function(){t(i),a([{x:0,y:0}]),c([{x:0,y:0}]),n([{x:0,y:0}]),r(0),l([])},children:Object(s.jsx)("span",{children:i})})}function w(e){var t=Object(c.useState)([]),a=Object(d.a)(t,2),n=a[0],r=a[1],i=e.getDrones,o=e.setSpeedChartData,l=e.setAltChartData,b=e.setMotorTempChartData,m=e.setIndex,x=e.activeDrone,p=e.lastLoc,O=e.setLastLoc,g=function(){var e=Object(j.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("api/drones/dronenames");case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){g()}),[]),Object(s.jsx)("div",{className:"picker-component",children:n.length>0?n.map((function(e){return Object(s.jsx)(v,{getDrones:i,setSpeedChartData:o,setAltChartData:l,setMotorTempChartData:b,setIndex:m,droneName:e.droneName,activeDrone:x,lastLoc:p,setLastLoc:O},e.droneName)})):null})}var y=function(e){var t=e.current;return Object(s.jsxs)("div",{className:"flight-duration-component single-stat-panel",children:[Object(s.jsxs)("div",{className:"text-area",children:[Object(s.jsx)("h3",{className:"component-header",children:"FLIGHT DURATION"}),Object(s.jsxs)("h2",{className:"read-out-info",style:{color:"hsla(212, 100%, 35%, 1)"},children:[t?t.time:0," ",Object(s.jsx)("span",{children:"seconds"})]})]}),Object(s.jsx)("div",{className:"icon-area",style:{backgroundColor:"hsla(212, 100%, 35%, 1)"},children:Object(s.jsx)("span",{className:"component-icon fas fa-stopwatch"})})]})};function N(e){var t,a,n=e.current,r=e.stat,i=e.type,o=e.good,l=e.caution,h=e.danger,j=e.className,b=e.units,u=e.fa,m=Object(c.useState)(0),x=Object(d.a)(m,2),p=x[0],O=x[1];return Object(c.useEffect)((function(){n&&O(n["".concat(r)])}),[n]),"altitude"===i?p<"".concat(h)?(t="danger",a="danger-background"):p<"".concat(l)?(t="caution",a="caution-background"):(t="good",a="good-background"):p<"".concat(o)?(t="good",a="good-background"):p<"".concat(l)?(t="caution",a="caution-background"):(t="danger",a="danger-background"),Object(s.jsxs)("div",{className:"".concat(j," single-stat-panel"),children:[Object(s.jsxs)("div",{className:"text-area",children:[Object(s.jsx)("h3",{className:"component-header",children:i.toUpperCase()}),Object(s.jsxs)("h2",{className:"read-out-info ".concat(t),children:[n?n["".concat(r)].toFixed(2):0,Object(s.jsx)("span",{children:b})]})]}),Object(s.jsx)("div",{className:"icon-area ".concat(a),children:Object(s.jsx)("span",{className:"component-icon fas ".concat(u)})})]})}var C=a(339),k=a(342),D=a(337);function S(e){var t=e.chartData,a=e.graphClass,n=e.graphTitle,r=Object(c.useState)(0),i=Object(d.a)(r,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){l("Speed Graph"===n?25:"Alt. Graph"===n?3e3:200)}),[]),Object(s.jsxs)("div",{className:"".concat(a),children:[Object(s.jsx)("div",{className:"heading",children:Object(s.jsx)("h2",{children:n})}),Object(s.jsx)(C.a,{theme:k.a.material,domain:{x:[0,800],y:[0,"".concat(o)]},children:Object(s.jsx)(D.a,{style:{data:{stroke:"#c43a31"},parent:{border:"1px solid #ccc"}},data:t,scale:{x:"linear",y:"linear"}})})]})}var L=a(69),M=a(68),T="pk.eyJ1IjoicnNhbWhvbGx5ZXIiLCJhIjoiY2trbjBlZ3NjMWo4aTJubXE5aDRsNzF5NSJ9.JKZ4y5tx1H3SfodxybqYvQ",I=function(e){var t=Object(c.useState)("Monochrome"),a=Object(d.a)(t,2),n=a[0],r=a[1],i=Object(c.useState)("mapbox://styles/rsamhollyer/ckkprmd573gmw17mlcncjk8bz"),l=Object(d.a)(i,2),h=l[0],j=l[1],b=e.data,u=e.mapPoints,m=e.lastLoc,x=e.setLastLoc,p=Object(c.useState)({latitude:29.910577,longitude:-95.060882,zoom:11,width:"90%",height:"90%"}),O=Object(d.a)(p,2),g=O[0],f=O[1];return Object(c.useEffect)((function(){b[0]&&f(Object(L.a)(Object(L.a)({},g),{},{latitude:b[0].lat,longitude:b[0].long}))}),[b]),Object(c.useEffect)((function(){x([].concat(Object(o.a)(m),[u]))}),[u]),Object(s.jsxs)("div",{className:"map-component",children:[Object(s.jsx)("div",{className:"heading",children:Object(s.jsx)("h2",{children:"Drone Position"})}),Object(s.jsxs)(M.b,Object(L.a)(Object(L.a)({mapStyle:h,mapboxApiAccessToken:T},g),{},{onViewportChange:function(e){f(e)},children:[u.lat?Object(s.jsx)(M.a,{latitude:u.lat,longitude:u.long,children:Object(s.jsx)("button",{className:"marker-btn",children:Object(s.jsx)("img",{src:"/black-drone.svg",alt:"Drone Icon"})},u.key)}):Object(s.jsx)(M.a,{latitude:29.910577,longitude:-95.060882,children:Object(s.jsx)("button",{className:"marker-btn",children:Object(s.jsx)("img",{src:"/black-drone.svg",alt:"Drone Icon"})},1)}),m.length>0?m.map((function(e){return e.lat?Object(s.jsx)(M.a,{latitude:e.lat,longitude:e.long,offsetLeft:8,children:Object(s.jsx)("button",{className:"marker-btn",children:Object(s.jsx)("img",{style:{width:"2px",height:"2px"},src:"/reddot.png",alt:"Drone Icon"})},e.key+" old")}):null})):null]})),Object(s.jsxs)("div",{className:"footer",children:[Object(s.jsx)("button",{className:"Monochrome"===n?"flight-button flight-button-slide active":"flight-button flight-button-slide",onClick:function(){j("mapbox://styles/rsamhollyer/ckkprmd573gmw17mlcncjk8bz"),r("Monochrome")},children:"Monochrome"}),Object(s.jsx)("button",{className:"Satellite"===n?"flight-button flight-button-slide active":"flight-button flight-button-slide",onClick:function(){j("mapbox://styles/rsamhollyer/ckkprljfz7xoi17mjo6asbeub"),r("Satellite")},children:"Satellite"}),Object(s.jsx)("button",{className:"Outdoors"===n?"flight-button flight-button-slide active":"flight-button flight-button-slide",onClick:function(){j("mapbox://styles/rsamhollyer/ckkn1mivy5aml17mnueua6ovj"),r("Outdoors")},children:"Outdoors"})]})]})};var F=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(),i=Object(d.a)(r,2),l=i[0],b=i[1],m=Object(c.useState)(null),x=Object(d.a)(m,2),O=x[0],g=x[1],v=Object(c.useState)([{x:0,y:0}]),C=Object(d.a)(v,2),k=C[0],D=C[1],L=Object(c.useState)([{x:0,y:0}]),M=Object(d.a)(L,2),T=M[0],F=M[1],z=Object(c.useState)([{x:0,y:0}]),A=Object(d.a)(z,2),E=A[0],G=A[1],J=Object(c.useState)(0),H=Object(d.a)(J,2),P=H[0],Y=H[1],W=Object(c.useState)({}),q=Object(d.a)(W,2),B=q[0],R=q[1],Z=Object(c.useState)([]),U=Object(d.a)(Z,2),V=U[0],X=U[1],_=V.length,K=V[P],Q=function(){var e=Object(j.a)(h.a.mark((function e(t,a,s){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/weather",e.next=3,u.a.get("/api/weather",{params:{lat:a,lon:s,units:t}});case 3:c=e.sent,g(c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a,s){return e.apply(this,arguments)}}(),$=function(){var e=Object(j.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/drones/getdrones",e.next=3,u.a.get("/api/drones/getdrones",{params:{drone:t}});case 3:a=e.sent,b(t),X(a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=setInterval((function(){P<_-1?(Y(P+1),D([].concat(Object(o.a)(k),[{x:V[P].time,y:V[P].speed}])),F([].concat(Object(o.a)(T),[{x:V[P].time,y:V[P].alt}])),G([].concat(Object(o.a)(E),[{x:V[P].time,y:V[P].temp}])),R({lat:V[P].lat,long:V[P].long,key:V[P].time})):Y(0)}),100);return function(){clearInterval(e)}}),[P,V]),Object(s.jsxs)("main",{className:"app",children:[Object(s.jsx)(f,{getWeather:Q,data:V}),Object(s.jsx)(w,{getDrones:$,setSpeedChartData:D,setAltChartData:F,setMotorTempChartData:G,setIndex:Y,activeDrone:l,setLastLoc:n}),Object(s.jsx)(N,{current:K,stat:"speed",type:"speed",good:.5,caution:.8,danger:1,className:"speed-component",units:"FT/S",fa:"fa-tachometer-alt"}),Object(s.jsx)(N,{current:K,stat:"alt",type:"altitude",good:300,caution:250,danger:50,className:"altitude-component",units:"feet",fa:"fa-plane-departure"}),Object(s.jsx)(N,{current:K,stat:"temp",type:"Motor Temperature",good:135,caution:150,danger:180,className:"motor-temp-component",units:"\xb0F",fa:"fa-fire"}),Object(s.jsx)(y,{current:K}),Object(s.jsx)(S,{chartData:k,graphClass:"speed-graph-component",graphTitle:"Speed Graph"}),Object(s.jsx)(S,{chartData:T,graphClass:"alt-graph-comp",graphTitle:"Alt. Graph"}),Object(s.jsx)(S,{chartData:E,graphClass:"motor-graph-component",graphTitle:"Motor Graph Comp."}),Object(s.jsx)(I,{data:V,mapPoints:B,lastLoc:a,setLastLoc:n}),Object(s.jsx)(p,{weather:O})]})},z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,344)).then((function(t){var a=t.getCLS,s=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),s(e),c(e),n(e),r(e)}))};i.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(F,{})}),document.getElementById("root")),z()}},[[331,1,2]]]);
//# sourceMappingURL=main.064ed806.chunk.js.map